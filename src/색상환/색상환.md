[2482번 색상환](https://www.acmicpc.net/problem/2482)

### 문제 요약

$N$ 색상환 중에 인접하지 않는 $K$개의 색을 선택하는 경우의 수를 구하세요.

## 생각

### 1. 수식으로 계산

모든 경우의 수에서, 인접한 경우의 수를 빼면 경우의 수를 구할 수 있다고 생각했습니다.\
인접한 경우의 수는 서로 인접한 색상을 한 쌍 선택하고, 그 한 쌍을 포함하는 모든 경우의 수입니다.\
식을 다음과 같이 세웠습니다.

$$ans = \frac{_nC_{k} - N *\ _{n-3}C_{k-2}}{?}\ \%\ MOD$$

하지만 모듈러 연산에서는 직접 나눗셈이 불가능합니다.\
페르마의 소정리를 이용하여 나눗셈을 모듈러 역수로 변환하여 계산할 수도 있지만, 다른 방법이 있을 것이라고 생각했습니다.\
또 중복을 제거하기 위해 나누어야 할 적절한 수를 찾지 못했기도 했구요.\
그래서 비슷한 원리로, DP로 생각해보기로 했습니다.

### 2. DP

일단 원형이라는 점을 배제하고, 점화식을 다음과 같이 정의했습니다.

$$D_{ij} = i\text{개의 색상 중 인접하지 않는 }j \text{개의 색상을 고르는 경우의 수}$$

$D_{ij}$를 구하기 위해서는 두 가지 경우를 고려하면 됩니다.

1. $i$를 고르는 경우 <br>
   $i$를 고르면 $i-1$을 고를 수 없습니다. 그러면 $i-2$개 중, $j-1$개를 고르는 경우의 수와 같아집니다.
2. $i$를 고르지 않는 경우
   $i$를 고르지 않으면 $i-1$개 중, $j$개를 고르는 경우의 수와 같아집니다.

점화식은 다음과 같습니다.

$$D_{ij} = (D_{i-2j-1} + D_{i-1j})\ \%\ MOD$$

문제에는 원형이라는 제약이 존재합니다. <br>
N을 고를 때는 N-1 뿐만 아니라 1 또한 고를 수 없습니다. <br>
하지만 N을 고르지 않을 때는 N-1과 1 모두 고를 수 있습니다. <br>
따라서 원형 배열에서 N개 중 K개를 고르는 경우의 수를 계산하기 위한 경우는 다음과 같습니다.

1. $N$를 고르는 경우 <br>
   $N$를 고르면 원형이기 때문에 $1$과 $N-1$을 고를 수 없습니다. \
   그러면 $N-3$개 중, $K-1$개를 고르는 경우의 수와 같아집니다.
2. $N$를 고르지 않는 경우
   $N$를 고르지 않으면 $N-1$개 중, $K$개를 고르는 경우의 수와 같아집니다.

따라서 정답을 구하는 계산은 다음과 같습니다.

$$ans = (D_{N-3K-1} + D_{N-1K})\ \%\ MOD$$
