[1956번 운동](https://www.acmicpc.net/problem/1956)

### 문제 요약

정점 $V$개, 단방향 간선 $E$개와 간선의 비용 $c$가 주어질 때, 발생하는 최소 거리 사이클의 거리를 구하세요.

$2 ≤ V ≤ 400$\
$0 ≤ E ≤ V(V-1)$\
$1 ≤ c ≤ 10000$\

## 생각

### 1. DFS

그래프를 탐색하면서 사이클을 찾았을 때 사이클의 거리를 저장하고, 그 거리 중 최소를 구합니다.

간선이 많기 때문에, 가지치기 제약을 다음과 같이 생각했습니다.

_사이클에 속한 어느 정점을 방문해도 사이클의 거리를 구할 수 있으므로 모든 정점을 한번씩만 탐색하면 가능한 모든 사이클을 구할 수 있다._

A 정점에서 갈 수 있는 모든 경우를 탐색했다고 가정하면, 나중에 B 정점으로부터 A 정점에 도착했을 때는 더이상 탐색할 필요가 없다고 생각했습니다.\
A 정점을 포함하는 사이클이 있다면 이미 구해졌을 것이고, 정점 간 거리가 자연수이기 때문에 B에서 A를 방문했을 때 A 정점을 포함하는 사이클보다 거리가 작은 사이클을 찾을
수는 없기 때문입니다.

하지만 다음 테스트 케이스에서 정점을 한 번만 탐색해서는 정답을 찾을 수 없습니다.

```
4 5
1 2 2
2 3 2
2 4 1
3 4 2
4 1 1
```

1번 노드에서 DFS 탐색 시작 시, 방문 체크 배열은 다음과 같이 설정됩니다.

[O, X, X, X] `탐색 시작`\
[O, O, X, X] `1번 -> 2번 노드 방문`\
[O, O, O, X] `2번 -> 3번 노드 방문`\
[O, O, O, O] `3번 -> 4번 노드 방문`\
[O, O, O, O] `4번 -> 1번 노드 방문`\
[O, O, O, O] `2번 -> 4번 노드 방문`

`2번 -> 4번 노드 방문` 시 4번 노드는 `1번 -> 2번 -> 4번` 사이클 탐색을 마친 상태여야 합니다.\
하지만 앞선 `3번 -> 4번 노드 방문` 시, 4번 노드에서 갈 수 있는 모든 경우를 제대로 탐색할 수 없습니다.\
1번 노드가 이미 방문 상태이기 때문에 방문할 수 없기 때문입니다.\
제대로 탐색하려면 같은 정점을 여러 번 탐색해야했고, 그러면 계산 횟수가 매우 많아져 시간 초과가 발생하기 때문에 다른 방법을 찾아야 했습니다.

### 2. 플로이드 워셜

정점이 400개로, 플로이드 워셜 알고리즘을 이용했을 때 제한 시간 내에 해결할 수 있는 개수입니다. \
보통의 경우 정점 400개 정도의 그래프 탐색 문제라면 플로이드 워셜 알고리즘을 사용하면 해결할 수 있습니다.

1. 모든 이동 가능한 정점에 대하여 최단거리를 플로이드 워셜 알고리즘을 사용하여 구합니다.

2. 모든 정점에 대하여 정점 간 거리 (A -> B의 거리 + B -> A의 거리)중 최소값을 구합니다.

사이클을 찾으려고 했던 접근 때문에 플로이드 워셜 알고리즘을 사용할 생각조차 하지 못했고, 많은 시간을 들여야 했습니다.\
문제의 조건을 잘 보면, 힌트를 얻을 수도 있다는 것을 다시 한 번 느낍니다..
